<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Letters For You ‚ù§Ô∏è</title>

<style>
:root{--red:#ff4d6d;--bg:#ffe3e8;}
body{margin:0;font-family:'Segoe UI',sans-serif;background:var(--bg);overflow-x:hidden; width: 100vw; height: 100vh;}

/* --- PAGE MANAGEMENT --- */
.page{ position:fixed; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; transition:all 0.8s ease; z-index: 10;}
.hidden{ opacity:0; pointer-events:none; transform:scale(0.9); }

/* --- BACKGROUNDS --- */
.insta-bg{ position:absolute; inset:0; z-index:-1; overflow:hidden;}
.insta-bg img{ width:100%; height:100vh; object-fit:cover; filter:blur(10px) brightness(0.7); transform:scale(1.1);}

/* --- PAGE 1: HERO (Untouched) --- */
.hero-content { display: flex; flex-direction: column; align-items: center; gap: 20px; width: 90%; }
.left-image img { width: 150px; height: 150px; object-fit: cover; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
.side-title { font-family: cursive; color: #fff; font-size: 1.8rem; text-align: center; animation: glow 1.5s infinite alternate; }

.stack { position: relative; width: 220px; height: 140px; animation: floatStack 3s infinite ease-in-out; }
.stack .env { position: absolute; width: 100%; height: 100%; background: #ed808b; border-radius: 8px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
.stack .env::before { content:""; position:absolute; top:0; width:100%; height:50px; background:#fbd3d3; clip-path:polygon(0 0,100% 0,50% 100%); }
.e1{top:0;left:0} .e2{top:8px;left:8px} .e3{top:16px;left:16px}

.tap-btn { background: var(--red); color: #fff; border: none; padding: 10px 20px; border-radius: 25px; font-weight: bold; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.overlay-btn { position: absolute; top: 60%; left: 50%; transform: translate(-50%, -50%); z-index: 5; }

/* --- PAGE 2: ENVELOPE GRID --- */
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 90%; perspective: 1000px; }
.envelope { width: 100%; height: 100px; background: #ed808b; border-radius: 6px; position: relative; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s; }
.flap { position: absolute; top: 0; width: 100%; height: 40px; background: #fbd3d3; clip-path: polygon(0 0,100% 0,50% 100%); z-index: 2; transition: transform 0.6s; transform-origin: top; }
.env-label { position: absolute; bottom: 8px; width: 100%; text-align: center; font-size: 0.75rem; color: #fff; font-family: cursive; z-index: 3; }
.paper { position: absolute; inset: 10%; background: #fff; border-radius: 4px; opacity: 0; z-index: 1; transition: 0.5s; }

.open .flap { transform: rotateX(180deg); z-index: 0; }
.open .paper { animation: letterRevealMobile 1.2s forwards; }
.fade { opacity: 0; transform: scale(0.5); transition: 0.6s; }

/* --- SPOTIFY-STYLE MEMORY CARD --- */
#memoryView { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 100; padding: 15px; }
.memory-paper { 
    background: #fff8b0; 
    width: 90%; 
    max-height: 85vh; 
    border-radius: 20px; 
    display: flex; 
    flex-direction: column; 
    overflow: hidden; 
    animation: paperPop 0.5s ease;
    box-shadow: 0 20px 40px rgba(0,0,0,0.4);
}
.paper-top { 
    width: 100%; 
    padding: 20px 20px 10px 20px; 
    box-sizing: border-box;
    display: flex;
    justify-content: center;
}
.paper-top img { 
    width: 100%; 
    height: auto; 
    max-height: 250px;
    object-fit: cover; 
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.25);
}
.paper-content { 
    padding: 10px 25px 25px 25px; 
    overflow-y: auto; 
    font-family: cursive; 
    font-size: 1rem; 
    line-height: 1.6; 
    color: #444; 
    flex-grow: 1;
    text-align: left;
}
.back-btn { background: var(--red); color: #fff; border: none; padding: 12px; font-weight: bold; width: 100%; border-radius: 0 0 15px 15px; cursor: pointer;}

/* --- FINAL SURPRISE --- */
#finalSurprise { display: none; text-align: center; }
.final-main img { width: 80%; border-radius: 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.4); margin-bottom: 20px; }
.apology-box { padding: 0 20px; font-family: cursive; color: #fff; }
.glow-text { text-shadow: 0 0 10px var(--red); font-size: 1rem; margin: 8px 0; opacity: 0; transform: translateY(10px); transition: 0.8s; }
.show-text { opacity: 1; transform: translateY(0); }

/* --- ANIMATIONS --- */
@keyframes letterRevealMobile {
  0% { transform: translateY(20px) scale(0.8); opacity: 0; }
  100% { transform: translateY(-40px) scale(1.1); opacity: 1; }
}
@keyframes paperPop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
@keyframes floatStack { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
@keyframes glow { from { text-shadow: 0 0 5px var(--red); } to { text-shadow: 0 0 20px var(--red); } }

/* --- HEARTS --- */
.heart { position: fixed; top: -20px; font-size: 20px; animation: fall linear forwards; z-index: 99; }
@keyframes fall { to { transform: translateY(110vh); opacity: 0; } }

/* Fly-in classes */
.fly { animation: flyIn 1s ease forwards; opacity: 0; }
@keyframes flyIn { from { transform: translateY(100px) rotate(10deg); opacity: 0; } to { transform: translateY(0) rotate(0); opacity: 1; } }
</style>
</head>

<body>
<audio id="bgMusic" loop><source src="music.mp3" type="audio/mpeg"></audio>

<div id="page1" class="page">
    <div class="insta-bg"><img src="22.jpeg"></div>
    <div class="hero-content">
        <div class="left-image"><img src="22.jpeg"></div>
        <h1 class="side-title">Something from my heart‚Ä¶ ‚ù§Ô∏è</h1>
        <div class="stack">
            <div class="env e1"></div>
            <div class="env e2"></div>
            <div class="env e3"></div>
            <button class="tap-btn overlay-btn" onclick="goToPage2()">üíå To, <br> Dumbu Pawar</button>
        </div>
    </div>
</div>

<div id="page2" class="page hidden">
    <div class="grid" id="envGrid">
        <div class="envelope fly" style="animation-delay: 0.1s" onclick="openMemory(1, this)">
            <div class="flap"></div><div class="env-label">Just You ü§ç</div><div class="paper"></div>
        </div>
        <div class="envelope fly" style="animation-delay: 0.3s" onclick="openMemory(2, this)">
            <div class="flap"></div><div class="env-label">You Matter ‚ú®</div><div class="paper"></div>
        </div>
        <div class="envelope fly" style="animation-delay: 0.5s" onclick="openMemory(3, this)">
            <div class="flap"></div><div class="env-label">A Memory ‚ú®</div><div class="paper"></div>
        </div>
        <div class="envelope fly" style="animation-delay: 0.7s" onclick="openMemory(4, this)">
            <div class="flap"></div><div class="env-label">Still you ‚ù§Ô∏è</div><div class="paper"></div>
        </div>
    </div>
</div>

<div id="memoryView">
    <div class="memory-paper">
        <div class="paper-top"><img id="memoryImg" src=""></div>
        <div class="paper-content" id="memoryText"></div>
        <button class="back-btn" onclick="closeMemory()">CLOSE</button>
    </div>
</div>

<div id="finalSurprise" class="page">
    <div class="insta-bg"><img src="22.jpeg"></div>
    <div class="final-main"><img src="22.jpeg"></div>
    <div class="apology-box" id="apologyBox">
        <p class="glow-text">I know things have changed...</p>
        <p class="glow-text">I don't know if you'll read this because I'm scared.</p>
        <p class="glow-text">One last chance isthava? Please?</p>
    </div>
    <button class="tap-btn" style="margin-top:20px" onclick="forgiveAction()">Stay with me? ‚ù§Ô∏è</button>
</div>

<div id="lovePosterScreen" class="page hidden" style="background:radial-gradient(circle,#ffe3e8,#ffb3c1);">
    <div style="background:#fffcdb; border:3px solid #ffb704; padding:30px; border-radius:15px; color:#db0000; font-family:cursive; font-size:2rem; text-align:center; box-shadow:0 0 20px rgba(219,0,0,0.3);">
        I LOVE YOU ‚ù§Ô∏è
    </div>
</div>

<script>
const memories = {
    1: { img: "first.png", text: "It is YOU. It has always been YOU and It will be just YOU. I am a different person infront of different people. I express something infront of some and hide it from others and I try to act all strong. But it iss only infront you, I can be the all versions of me. I felt the most secured when I am with you, I don‚Äôt even know how I slept on your shoulder in our college ground when I am can‚Äôt even sleep on a sofa. That is how much I trust you, how safe I feel when I am with you." },
    2: { img: "second.png", text: "Chandan, it's been 6 whole years since you entered into my life with a smile. I cannot thank you enough for all these years of love. Be it as a friend or my love, you‚Äôve stayed with me all throughout. You changed the way I think, I believe and I see things. I felt the safest around you, that I could even tell you something that I have been holding onto myself my entire life." },
    3: { img: "third.png", text: "Not just one but memories. You asked me if I still have the gifts that you gave me. I even have the tag of sweatshirt you first gifted me. The handwritten notes, the flower, the attitude dumbu, Bubble machine, sponge smiley keychain, black hoodie, phone case, camera, red cute doll, everyyythingggg." },
    4: { img: "four.png", text: "Whatever it is, I am still waiting for you, hoping and praying for god to bring us back, to change your heart to love me again. I believe we did happen for a reason. I can love you whoooole life, ayina inka prema migilipothundhi antha ishtam nuvvante. Okasari pelli cheskuntava ani adagochu kada." }
};

let openedCount = 0;
let typingTimer = null;

function goToPage2() {
    document.getElementById("bgMusic").play();
    document.getElementById("page1").classList.add("hidden");
    document.getElementById("page2").classList.remove("hidden");
    startHearts();
}

function openMemory(num, el) {
    el.classList.add("open");
    setTimeout(() => {
        el.classList.add("fade");
        setTimeout(() => {
            document.getElementById("memoryImg").src = memories[num].img;
            document.getElementById("memoryView").style.display = "flex";
            const rightArea = document.querySelector('.paper-content');
            if(rightArea) rightArea.scrollTop = 0;
            typeWriter(memories[num].text);
            openedCount++;
        }, 600);
    }, 1000);
}

function closeMemory() {
    document.getElementById("memoryView").style.display = "none";
    if(typingTimer) clearTimeout(typingTimer);
    if(openedCount === 4) {
        document.getElementById("page2").classList.add("hidden");
        document.getElementById("finalSurprise").style.display = "flex";
        setTimeout(() => {
            const lines = document.querySelectorAll("#apologyBox .glow-text");
            lines.forEach((l, i) => setTimeout(() => l.classList.add("show-text"), i * 1000));
        }, 500);
    }
}

function typeWriter(text) {
    const el = document.getElementById("memoryText");
    el.innerHTML = "";
    let i = 0;
    function type() {
        if (i < text.length) {
            el.innerHTML += text.charAt(i);
            i++;
            typingTimer = setTimeout(type, 30);
        }
    }
    type();
}

function startHearts() {
    setInterval(() => {
        const h = document.createElement("div");
        h.className = "heart";
        h.innerHTML = "‚ù§Ô∏è";
        h.style.left = Math.random() * 100 + "vw";
        h.style.animationDuration = (Math.random() * 2 + 3) + "s";
        document.body.appendChild(h);
        setTimeout(() => h.remove(), 5000);
    }, 400);
}

function forgiveAction() {
    document.getElementById("finalSurprise").classList.add("hidden");
    document.getElementById("lovePosterScreen").classList.remove("hidden");
}
</script>
</body>
</html>